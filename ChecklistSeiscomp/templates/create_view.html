{% extends "base.html" %}
{% load materializecss %}


{% block content %}

<div class="container" style="padding-top: 2rem; padding-bottom: 2rem;">
    <form method="POST" enctype="multipart/form-data">

        <!-- Security token -->
        {% csrf_token %}
        {{ input_form.as_p }}
        <button type="submit" class="btn waves-effect waves-light blue darken-1" type="submit"
            name="action">Submit</button>
    </form>
    <br><br>
    <h4>Data terakhir</h4>
    <a class="waves-effect waves-light btn red darken-1" href="/"><i class="material-icons left">picture_as_pdf</i>Buat
        Laporan PDF</a>
    <a class="waves-effect waves-light btn green darken-1" href="/"><i class="fa-solid fa-file-excel"
            style="padding-right: 1rem;"></i>Buat Laporan
        Excel</a>
    <table>
        <tr>
            <th>Tanggal</th>
            <th>Kelompok</th>
            <th>Operator</th>
            <th>Jam</th>
            <th>Gaps</th>
            <th>Spikes</th>
            <th>Blanks</th>
            <th>Aksi</th>
        </tr>
        {% for data in dataset %}
        <tr>
            <td> {{ data.tanggal }} </td>
            <td> {{ data.kelompok }} </td>
            <td> {{ data.operator }} </td>
            <td> {{ data.jam }} </td>
            <td> {{ data.gaps }} </td>
            <td> {{ data.spikes }} </td>
            <td> {{ data.blanks }} </td>
            <td>
                <a class="waves-effect waves-light btn" id="edit-{{ operator.id }}" style="display: none;"><i
                        class="material-icons center">edit</i></a>
                <a id="data_del_btn{{ data.id }}" onmouseup="data_del({{ data.id }})"
                    class="waves-effect waves-light btn red" id="delete-{{ operator.id }}"><i
                        class="material-icons center">delete</i></a>
                <a id="delete_confirmation_{{ data.id }}" href="{% url 'data_delete' data.id %}"
                    class="waves-effect waves-light btn red" style="visibility: hidden;"><i
                        class="material-icons center"></i>yes</a>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>


{% endblock content %}

{% block javascript %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.1/js/materialize.min.js"
    integrity="sha256-SrBfGi+Zp2LhAvy9M1bWOCXztRU9Ztztxmu5BcYPcPE=" crossorigin="anonymous"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var elems = document.querySelectorAll('.datepicker');
        var options = {
            'autoClose': true,
        };
        M.Datepicker.init(elems, options);
    });

    document.addEventListener('DOMContentLoaded', function () {
        var elems = document.querySelectorAll('select');
        M.FormSelect.init(elems);
    });

    document.addEventListener('DOMContentLoaded', function () {
        var elems = document.querySelectorAll('.tooltipped');
        M.Tooltip.init(elems);
    });

</script>
{% endblock javascript %}